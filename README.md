# 多用户网络聊天室 - 房间模式

## 功能介绍

本聊天室现在支持房间模式，具有以下特性：

### 房间功能
- 最多支持10个房间
- 每个房间最多容纳10个用户
- 用户必须加入房间才能发送消息
- 消息只在同一房间内的用户之间传播

### 默认房间
系统预设了3个房间：
1. 大厅 (room1)
2. 游戏讨论 (room2)  
3. 技术交流 (room3)

### 界面说明
- **当前用户**：显示登录的用户名
- **当前房间**：显示当前所在的房间，未加入时显示"未加入"
- **房间列表**：显示所有可用房间及人数
- **房间用户**：显示当前房间内的所有用户
- **加入房间**：点击选择房间后加入
- **离开房间**：离开当前所在的房间

### 使用步骤
1. 启动服务器：双击 `start_server.bat`
2. 启动客户端：双击 `start_client.bat`
3. 输入用户名登录
4. 选择一个房间并点击"加入房间"
5. 在房间内与其他用户聊天
6. 可以离开当前房间并加入其他房间

### 消息协议
- `LOGIN|username` - 用户登录
- `JOINROOM|roomId` - 加入房间
- `LEAVEROOM|roomId` - 离开房间
- `CHAT|username:message` - 发送聊天消息
- `LOGOUT|username` - 用户登出

### 服务器响应
- `SYSTEM|message` - 系统消息
- `ROOMLIST|roomId:roomName:userCount,...` - 房间列表
- `ROOMUSERLIST|roomId|user1,user2,...` - 房间用户列表
- `CHAT|username:message` - 聊天消息广播

## 技术实现

### 主要类
1. **ChatServer** - 服务器主类，管理客户端连接和房间
2. **Room** - 房间类，管理房间内用户和消息广播
3. **ClientHandler** - 客户端处理线程，处理单个客户端的消息
4. **ChatClient** - 客户端界面，提供图形化聊天界面

### 新增特性
- 房间管理系统
- 房间用户限制
- 按房间分组的消息广播
- 动态房间列表更新
- 房间状态显示

## 注意事项
- 需要先启动服务器再启动客户端
- 用户必须加入房间才能发送消息
- 房间满员时无法加入
- 服务器关闭时所有客户端会断开连接
